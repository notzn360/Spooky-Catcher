<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jogo do Mago üéÉ</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(to bottom, #000, #1a0000);
    color: white;
    font-family: sans-serif;
    text-align: center;
  }
  #game {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }
  #player {
    position: absolute;
    bottom: 20px;
    font-size: 50px;
  }
  .pumpkin, .ghost {
    position: absolute;
    font-size: 40px;
  }
  #ui {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
  }
  #startBtn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: orange;
    border: none;
    padding: 10px 20px;
    margin: 5px;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
  }
  #restartBtn, #nextLevelBtn, #copyBtn {
    background: orange;
    border: none;
    padding: 10px 20px;
    margin: 5px;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
  }
  #endScreen {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  #mobileControls {
    position: absolute;
    bottom: 10px;
    width: 100%;
    display: none;
    justify-content: space-around;
  }
  .controlBtn {
    background: orange;
    border: none;
    padding: 15px 30px;
    font-size: 25px;
    border-radius: 10px;
    user-select: none;
  }
</style>
</head>
<body>
  <div id="game">
    <div id="ui">
      üéØ Pontos: <span id="score">0</span> |
      ‚è∞ Tempo: <span id="time">30</span> |
      üß© Level: <span id="level">1</span>
    </div>
    <div id="player">üßô‚Äç‚ôÇÔ∏è</div>
    <button id="startBtn">Come√ßar</button>

    <div id="endScreen">
      <h1 id="endMessage"></h1>
      <h2 id="finalScore"></h2>
      <p id="rewardText"></p>
      <p id="rewardCode"></p>
      <button id="copyBtn" style="display:none;">Copiar C√≥digo</button>
      <button id="restartBtn">Jogar Novamente</button>
      <button id="nextLevelBtn" style="display:none;">Ir para o Pr√≥ximo N√≠vel</button>
    </div>

    <div id="mobileControls">
      <button class="controlBtn" id="leftBtn">‚¨ÖÔ∏è</button>
      <button class="controlBtn" id="rightBtn">‚û°Ô∏è</button>
    </div>
  </div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreDisplay = document.getElementById("score");
const timeDisplay = document.getElementById("time");
const startBtn = document.getElementById("startBtn");
const endScreen = document.getElementById("endScreen");
const finalScore = document.getElementById("finalScore");
const rewardCode = document.getElementById("rewardCode");
const rewardText = document.getElementById("rewardText");
const restartBtn = document.getElementById("restartBtn");
const nextLevelBtn = document.getElementById("nextLevelBtn");
const copyBtn = document.getElementById("copyBtn");
const levelDisplay = document.getElementById("level");
const leftBtn = document.getElementById("leftBtn");
const rightBtn = document.getElementById("rightBtn");

let score = 0;
let timeLeft = 30;
let gameInterval;
let pumpkinInterval;
let ghostInterval;
let playerX;
let gameActive = false;
let level = 1;
let step = 40;
let pumpkinSpeed = 6;
let ghostSpeed = 4;
let spawnRate = 800;

const rewardCodes = [
  "HALLOWEEN-2025","MAGIC-7777","SPOOKY-5555","MAGO-9999","WITCHKING-4444",
  "NTXGHOST-1001","SHADOW-2024","NIGHTMARE-6666","BATSTORM-4321","PUMPKIN-1313",
  "WITCH-2424","GHOSTLY-9009","ZOMBIE-3333","CANDY-8080","SKULL-7777",
  "FEAR-1111","CURSE-9090","SPELL-5555","HAUNT-6660","EVIL-2222",
  "TRICK-7770","TREAT-8888","MOON-4444","DARK-1010","CREEPY-2020",
  "MONSTER-3030","BONES-4040","SCREAM-5050","POTION-6060","SPIDER-7070",
  "MIST-8088","CAULDRON-9990","SOUL-3131","BLOOD-2121","TERROR-4141",
  "GRAVE-5151","MASK-6161","SCARY-7171","WOLF-8181","DREAD-9191",
  "PHANTOM-1221","CRYPT-1331","MUMMY-1441","BOO-1551","CAFEAR-1661",
  "VAMPIRE-1771","SKELETON-1881","SPIRIT-1991","FRIGHT-2002","NTX-WOLOWEEN-5050"
];

document.addEventListener("contextmenu", e => e.preventDefault());

function startGame() {
  score = 0;
  timeLeft = 30;
  gameActive = true;
  scoreDisplay.textContent = score;
  timeDisplay.textContent = timeLeft;
  startBtn.style.display = "none";
  endScreen.style.display = "none";
  levelDisplay.textContent = level;

  playerX = window.innerWidth / 2;
  player.style.left = playerX + "px";

  pumpkinInterval = setInterval(spawnPumpkin, spawnRate);
  ghostInterval = setInterval(spawnGhost, spawnRate * 2);
  gameInterval = setInterval(updateTimer, 1000);

  document.addEventListener("keydown", movePlayer);

  if (window.innerWidth <= 768) {
    document.getElementById("mobileControls").style.display = "flex";
  }
}

function movePlayer(e) {
  if (!gameActive) return;
  if (["a", "A", "ArrowLeft"].includes(e.key)) {
    playerX -= step;
  } else if (["d", "D", "ArrowRight"].includes(e.key)) {
    playerX += step;
  }
  if (playerX < 0) playerX = 0;
  if (playerX > window.innerWidth - 50) playerX = window.innerWidth - 50;
  player.style.left = playerX + "px";
}

leftBtn.addEventListener("touchstart", () => moveMobile(-step));
rightBtn.addEventListener("touchstart", () => moveMobile(step));
leftBtn.addEventListener("click", () => moveMobile(-step));
rightBtn.addEventListener("click", () => moveMobile(step));

function moveMobile(distance) {
  if (!gameActive) return;
  playerX += distance;
  if (playerX < 0) playerX = 0;
  if (playerX > window.innerWidth - 50) playerX = window.innerWidth - 50;
  player.style.left = playerX + "px";
}

function spawnPumpkin() {
  const pumpkin = document.createElement("div");
  pumpkin.classList.add("pumpkin");
  pumpkin.textContent = "üéÉ";
  pumpkin.style.left = Math.random() * (window.innerWidth - 40) + "px";
  pumpkin.style.top = "-50px";
  game.appendChild(pumpkin);

  let pos = -50;
  const fallSpeed = pumpkinSpeed;

  const fall = setInterval(() => {
    if (!gameActive) { pumpkin.remove(); clearInterval(fall); return; }
    pos += fallSpeed;
    pumpkin.style.top = pos + "px";

    const pumpkinRect = pumpkin.getBoundingClientRect();
    const playerRect = player.getBoundingClientRect();

    if (
      pumpkinRect.bottom >= playerRect.top &&
      pumpkinRect.left + 10 < playerRect.right &&
      pumpkinRect.right - 10 > playerRect.left
    ) {
      score++;
      scoreDisplay.textContent = score;
      pumpkin.remove();
      clearInterval(fall);

      if (score >= 15 && level < 5) nextLevelPrompt();
      else if (score >= 15 && level === 5) endGame(true);
    }

    if (pos > window.innerHeight) {
      pumpkin.remove();
      clearInterval(fall);
    }
  }, 20);
}

function spawnGhost() {
  const ghost = document.createElement("div");
  ghost.classList.add("ghost");
  ghost.textContent = "üëª";
  ghost.style.left = Math.random() * (window.innerWidth - 40) + "px";
  ghost.style.top = "-50px";
  game.appendChild(ghost);

  let pos = -50;
  const fallSpeed = ghostSpeed;

  const fall = setInterval(() => {
    if (!gameActive) { ghost.remove(); clearInterval(fall); return; }
    pos += fallSpeed;
    ghost.style.top = pos + "px";

    const ghostRect = ghost.getBoundingClientRect();
    const playerRect = player.getBoundingClientRect();

    if (
      ghostRect.bottom >= playerRect.top &&
      ghostRect.left + 10 < playerRect.right &&
      ghostRect.right - 10 > playerRect.left
    ) {
      endGame(false, true);
      ghost.remove();
      clearInterval(fall);
    }

    if (pos > window.innerHeight) {
      ghost.remove();
      clearInterval(fall);
    }
  }, 25);
}

function updateTimer() {
  if (!gameActive) return;
  timeLeft--;
  timeDisplay.textContent = timeLeft;
  if (timeLeft <= 0 && score < 15) endGame(false);
}

function nextLevelPrompt() {
  gameActive = false;
  clearInterval(gameInterval);
  clearInterval(pumpkinInterval);
  clearInterval(ghostInterval);

  endScreen.style.display = "flex";
  document.getElementById("endMessage").textContent = `üéØ Voc√™ completou o N√≠vel ${level}!`;
  nextLevelBtn.style.display = "inline-block";
  restartBtn.style.display = "none";
}

function nextLevel() {
  level++;
  if (level > 5) return endGame(true);
  timeLeft = 30;
  score = 0;
  endScreen.style.display = "none";
  nextLevelBtn.style.display = "none";
  startGame();
}

function endGame(won = false, ghostHit = false) {
  gameActive = false;
  clearInterval(gameInterval);
  clearInterval(pumpkinInterval);
  clearInterval(ghostInterval);
  document.querySelectorAll(".pumpkin, .ghost").forEach(p => p.remove());
  endScreen.style.display = "flex";
  nextLevelBtn.style.display = "none";
  restartBtn.style.display = "inline-block";
  copyBtn.style.display = "none";

  if (ghostHit) {
    document.getElementById("endMessage").textContent = "üëª Voc√™ tomou um susto!";
    finalScore.textContent = "";
    rewardText.textContent = "";
    rewardCode.textContent = "";
    return;
  }

  if (won && level === 5) {
    const code = rewardCodes[Math.floor(Math.random() * rewardCodes.length)];
    document.getElementById("endMessage").textContent = "üéâ Parab√©ns! Voc√™ venceu!";
    rewardText.textContent = "Seu c√≥digo de recompensa:";
    rewardCode.textContent = code;
    copyBtn.style.display = "inline-block";
    copyBtn.onclick = () => {
      navigator.clipboard.writeText(code);
      copyBtn.textContent = "‚úÖ Copiado!";
    };
  } else {
    document.getElementById("endMessage").textContent = "‚è∞ O tempo acabou!";
  }
}

restartBtn.addEventListener("click", startGame);
startBtn.addEventListener("click", startGame);
nextLevelBtn.addEventListener("click", nextLevel);
</script>
</body>
</html>
